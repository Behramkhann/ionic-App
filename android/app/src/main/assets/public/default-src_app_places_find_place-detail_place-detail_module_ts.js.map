{"version":3,"sources":["./src/app/bookings/booking.service.ts","./src/app/bookings/create-booking/create-booking.component.ts","./src/app/models/booking.model.ts","./src/app/places/find/place-detail/place-detail-routing.module.ts","./src/app/places/find/place-detail/place-detail.module.ts","./src/app/places/find/place-detail/place-detail.page.ts","./src/app/bookings/create-booking/create-booking.component.scss","./src/app/places/find/place-detail/place-detail.page.scss","./src/app/bookings/create-booking/create-booking.component.html","./src/app/places/find/place-detail/place-detail.page.html"],"names":[],"mappings":"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","file":"default-src_app_places_find_place-detail_place-detail_module_ts.js","sourcesContent":["/* eslint-disable arrow-body-style */\n/* eslint-disable @typescript-eslint/no-unused-expressions */\n/* eslint-disable max-len */\n/* eslint-disable no-underscore-dangle */\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Key } from 'protractor';\nimport { BehaviorSubject } from 'rxjs';\nimport { delay, map, switchMap, take, tap } from 'rxjs/operators';\nimport { AuthService } from '../auth/auth.service';\nimport { Booking } from '../models/booking.model';\n\ninterface BookingData {\n  bookedFrom: string;\n  firstname: string;\n  guestNumber: number;\n  lastName: string;\n  placeId: string;\n  placeImg: string;\n  placeTitle: string;\n  userId: string;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BookingService {\n  private _bookings = new BehaviorSubject<Booking[]>([]);\n\n  get bookings() {\n    return this._bookings.asObservable();\n  }\n\n  constructor(private authService: AuthService, private http: HttpClient) {}\n\n  addBooking(\n    placeId: string,\n    placeTitle: string,\n    placeImg: string,\n    firstName: string,\n    lastName: string,\n    guestNumber: number,\n    dateFrom: Date,\n    dateTo: Date\n  ) {\n    let generatedId: string;\n    const newBooking = new Booking(\n      Math.random.toString(),\n      placeId,\n      this.authService.userId,\n      placeTitle,\n      placeImg,\n      firstName,\n      lastName,\n      guestNumber,\n      dateFrom,\n      dateTo\n    );\n    return this.http\n      .post<{ name: string }>(\n        'https://ion-app-e8ff9-default-rtdb.asia-southeast1.firebasedatabase.app/bookings.json',\n        { ...newBooking, id: null }\n      )\n      .pipe(\n        switchMap((resData) => {\n          resData.name;\n          return this.bookings;\n        }),\n        take(1),\n        tap((bookings) => {\n          newBooking.id = generatedId;\n          this._bookings.next(bookings.concat(newBooking));\n        })\n      );\n  }\n\n  fetchBookings() {\n    return this.http\n      .get<{ [key: string]: Booking }>(\n        `https://ion-app-e8ff9-default-rtdb.asia-southeast1.firebasedatabase.app/bookings.json?orderBy=\"userId\"&equalTo\"${this.authService.userId}\"`\n      )\n      .pipe(\n        map((bookingsData) => {\n          const bookings = [];\n          for (const key in bookingsData) {\n            if (bookingsData.hasOwnProperty(key)) {\n              bookings.push(\n                new Booking(\n                  key,\n                  bookingsData[key].placeId,\n                  bookingsData[key].userId,\n                  bookingsData[key].placeTitle,\n                  bookingsData[key].placeImg,\n                  bookingsData[key].firstname,\n                  bookingsData[key].lastName,\n                  bookingsData[key].guestNumber,\n                  new Date(bookingsData[key].bookedFrom),\n                  new Date(bookingsData[key].bookedTo)\n                )\n              );\n            }\n          }\n          return bookings;\n        }),\n        tap((bookings) => {\n          this._bookings.next(bookings);\n        })\n      );\n  }\n\n  cancelBooking(bookingId: string) {\n    return this.http\n      .delete(\n        `https://ion-app-e8ff9-default-rtdb.asia-southeast1.firebasedatabase.app/bookings/${bookingId}.json`\n      )\n      .pipe(\n        switchMap(() => {\n          return this.bookings;\n        }),\n        take(1),\n        tap((bookings) => {\n          this._bookings.next(\n            bookings.filter((b) => {\n              b.id = bookingId;\n            })\n          );\n        })\n      );\n  }\n}\n","/* eslint-disable max-len */\nimport { Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { ModalController } from '@ionic/angular';\nimport { Place } from '../../models/place.model';\n\n@Component({\n  selector: 'app-create-booking',\n  templateUrl: './create-booking.component.html',\n  styleUrls: ['./create-booking.component.scss'],\n})\nexport class CreateBookingComponent implements OnInit {\n  @Input() selectedPlace: Place;\n  @Input() selectedMode: 'select' | 'random';\n  @ViewChild('f') form: NgForm;\n  startDate: string;\n  endDate: string;\n  constructor(private modalCtrl: ModalController) {}\n\n  ngOnInit() {\n    const availableFrom = new Date(this.selectedPlace.availableFrom);\n    const availableTo = new Date(this.selectedPlace.availableTo);\n    if (this.selectedMode === 'random') {\n      this.startDate = new Date(\n        availableFrom.getTime() +\n          Math.random() *\n            (availableTo.getTime() -\n              7 * 24 * 60 * 60 * 1000 -\n              availableFrom.getTime())\n      ).toISOString();\n      this.endDate = new Date(\n        new Date(this.startDate).getTime() +\n          Math.random() *\n            (new Date(this.startDate).getTime() +\n              6 * 24 * 60 * 60 * 1000 -\n              new Date(this.startDate).getTime())\n      ).toISOString();\n    }\n  }\n\n  onCancel() {\n    this.modalCtrl.dismiss({\n      dismissed: true,\n    });\n  }\n\n  onBookPlace() {\n    if (!this.form.valid || !this.dateValid) {\n      return;\n    }\n    this.modalCtrl.dismiss(\n      {\n        bookingData: {\n          firstName: this.form.value['first-name'],\n          lastName: this.form.value['last-name'],\n          guestNumber: +this.form.value['guest-number'],\n          startDate: new Date(this.form.value['date-from']),\n          endDate: new Date(this.form.value['date-to']),\n        },\n      },\n      'confirm'\n    );\n  }\n  dateValid() {\n    const startDate = new Date(this.form.value['date-from']);\n    const endDate = new Date(this.form.value['date-to']);\n    return endDate > startDate;\n  }\n}\n","export class Booking {\r\n  constructor(\r\n    public id: string,\r\n    public placeId: string,\r\n    public userId: string,\r\n    public placeImg: string,\r\n    public firstname: string,\r\n    public lastName: string,\r\n    public placeTitle: string,\r\n    public guestNumber: number,\r\n    public bookedFrom: Date,\r\n    public bookedTo: Date\r\n  ) {}\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PlaceDetailPage } from './place-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PlaceDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PlaceDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PlaceDetailPageRoutingModule } from './place-detail-routing.module';\n\nimport { PlaceDetailPage } from './place-detail.page';\nimport { CreateBookingComponent } from 'src/app/bookings/create-booking/create-booking.component';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PlaceDetailPageRoutingModule,\n    SharedModule,\n  ],\n  declarations: [PlaceDetailPage, CreateBookingComponent],\n  entryComponents: [CreateBookingComponent],\n})\nexport class PlaceDetailPageModule {}\n","/* eslint-disable max-len */\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  ActionSheetController,\n  AlertController,\n  LoadingController,\n  ModalController,\n  NavController,\n} from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { AuthService } from 'src/app/auth/auth.service';\nimport { BookingService } from 'src/app/bookings/booking.service';\nimport { Place } from 'src/app/models/place.model';\nimport { MapModalComponent } from 'src/app/shared/map-modal/map-modal.component';\nimport { CreateBookingComponent } from '../../../bookings/create-booking/create-booking.component';\nimport { PlacesService } from '../../places.service';\n\n@Component({\n  selector: 'app-place-detail',\n  templateUrl: './place-detail.page.html',\n  styleUrls: ['./place-detail.page.scss'],\n})\nexport class PlaceDetailPage implements OnInit, OnDestroy {\n  place: Place;\n  isBookable = false;\n  placeSub: Subscription;\n  isLoading = false;\n  constructor(\n    private navCtrl: NavController,\n    private route: ActivatedRoute,\n    private modalCtrl: ModalController,\n    private placesService: PlacesService,\n    private actionSheetCtrl: ActionSheetController,\n    private bookingService: BookingService,\n    private router: Router,\n    private loadingCtrl: LoadingController,\n    private authService: AuthService,\n    private alertCtrl: AlertController\n  ) {}\n\n  ngOnInit() {\n    this.route.paramMap.subscribe((paramMap) => {\n      if (!paramMap.has('placeId')) {\n        this.navCtrl.navigateBack('/places/tabs/discover');\n        return;\n      }\n      this.isLoading = true;\n      this.placeSub = this.placesService\n        .getPlace(paramMap.get('placeId'))\n        .subscribe(\n          (place) => {\n            this.place = place;\n            this.isBookable = place.userId !== this.authService.userId;\n            this.isLoading = false;\n          },\n          (error) => {\n            this.alertCtrl\n              .create({\n                header: 'An error occured',\n                message: 'Could not load place try again',\n                buttons: [\n                  {\n                    text: 'okay',\n                    handler: () => {\n                      this.router.navigate(['/places/tabs/find']);\n                    },\n                  },\n                ],\n              })\n              .then((alertEl) => alertEl.present());\n          }\n        );\n    });\n  }\n\n  onBookPlace() {\n    this.actionSheetCtrl\n      .create({\n        header: 'Choose An action',\n        buttons: [\n          {\n            text: 'select Date',\n            handler: () => {\n              this.onOpenBookingModal('select');\n            },\n          },\n          {\n            text: 'Random Date',\n            handler: () => {\n              this.onOpenBookingModal('random');\n            },\n          },\n          { text: 'Cancel', role: 'destructive' },\n        ],\n      })\n      .then((actionSheetEl) => {\n        actionSheetEl.present();\n      });\n  }\n  onOpenBookingModal(mode: 'select' | 'random') {\n    this.modalCtrl\n      .create({\n        component: CreateBookingComponent,\n        componentProps: { selectedPlace: this.place, selectedMode: mode },\n      })\n      .then((modalEl) => {\n        modalEl.present();\n        return modalEl.onDidDismiss();\n      })\n      .then((resData) => {\n        if (resData.role === 'confirm') {\n          this.loadingCtrl\n            .create({ message: 'Booking Place' })\n            .then((loadingEl) => {\n              loadingEl.present();\n              const data = resData.data.bookingData;\n              this.bookingService\n                .addBooking(\n                  this.place.id,\n                  this.place.title,\n                  this.place.imgUrl,\n                  data.firstName,\n                  data.lastName,\n                  data.guestNumber,\n                  data.startDate,\n                  data.EndDate\n                )\n                .subscribe(() => {\n                  loadingEl.dismiss();\n                });\n            });\n        }\n      });\n  }\n\n  onShowFullMap() {\n    this.modalCtrl\n      .create({\n        component: MapModalComponent,\n        componentProps: {\n          center: {\n            lat: this.place.location.lat,\n            lng: this.place.location.lng,\n          },\n          selectable: false,\n          closeButtonText: 'Close',\n          title: this.place.location.address,\n        },\n      })\n      .then((modalEl) => {\n        modalEl.present();\n      });\n  }\n\n  ngOnDestroy() {\n    this.placeSub.unsubscribe();\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjcmVhdGUtYm9va2luZy5jb21wb25lbnQuc2NzcyJ9 */\";","export default \".location-img {\\n  width: 100%;\\n  height: 25rem;\\n  max-height: 30vh;\\n  object-fit: cover;\\n}\\n\\np {\\n  margin: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYWNlLWRldGFpbC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFBO0VBQ0EsYUFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7QUFDRjs7QUFDQTtFQUNFLFNBQUE7QUFFRiIsImZpbGUiOiJwbGFjZS1kZXRhaWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvY2F0aW9uLWltZyB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAyNXJlbTtcclxuICBtYXgtaGVpZ2h0OiAzMHZoO1xyXG4gIG9iamVjdC1maXQ6IGNvdmVyO1xyXG59XHJcbnAge1xyXG4gIG1hcmdpbjogMDtcclxufVxyXG4iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title> {{ selectedPlace.title }} </ion-title>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button (click)=\\\"onCancel()\\\">\\n        <ion-icon name=\\\"close\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"text-center padding\\\">\\n  <form (ngSubmit)=\\\"onBookPlace()\\\" #f=\\\"ngForm\\\">\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col sizeSm=\\\"6\\\" offsetSm=\\\"3\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\"> First Name </ion-label>\\n            <ion-input\\n              type=\\\"text\\\"\\n              ngModel\\n              name=\\\"first-name\\\"\\n              required\\n            ></ion-input>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col sizeSm=\\\"6\\\" offsetSm=\\\"3\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\"> Last Name </ion-label>\\n            <ion-input\\n              type=\\\"text\\\"\\n              ngModel\\n              name=\\\"last-name\\\"\\n              required\\n            ></ion-input>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col sizeSm=\\\"6\\\" offsetSm=\\\"3\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\"> Number of Guests </ion-label>\\n            <ion-select name=\\\"guest-number\\\" [ngModel]=\\\"'2'\\\">\\n              <ion-select-option value=\\\"1\\\">1</ion-select-option>\\n              <ion-select-option value=\\\"2\\\">2</ion-select-option>\\n              <ion-select-option value=\\\"3\\\">3</ion-select-option>\\n            </ion-select>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col sizeSm=\\\"3\\\" offsetSm=\\\"3\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\"> From </ion-label>\\n            <ion-datetime\\n              displayFormat=\\\"MMM DD YYYY\\\"\\n              pickerFormat=\\\"YY MM DD\\\"\\n              [min]=\\\"selectedPlace.availableFrom\\\"\\n              [max]=\\\"selectedPlace.availableTo\\\"\\n              [ngModel]=\\\"startDate\\\"\\n              name=\\\"date-from\\\"\\n              required\\n              #startDateCtrl=\\\"ngModel\\\"\\n            ></ion-datetime>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col sizeSm=\\\"3\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\"> To </ion-label>\\n            <ion-datetime\\n              displayFormat=\\\"MMM DD YYYY\\\"\\n              pickerFormat=\\\"YY MM DD\\\"\\n              [min]=\\\"startDateCtrl.value\\\"\\n              [max]=\\\"selectedPlace.availableTo\\\"\\n              [ngModel]=\\\"endDate\\\"\\n              name=\\\"date-to\\\"\\n              required\\n            ></ion-datetime>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col sizeSm=\\\"6\\\" offsetSm=\\\"3\\\">\\n          <ion-button\\n            color=\\\"secondary\\\"\\n            expand=\\\"block\\\"\\n            type=\\\"submit\\\"\\n            [disabled]=\\\"!dateValid\\\"\\n          >\\n            Book\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n</ion-content>\\n\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/places/tabs/find\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title> {{ isLoading ? 'Loading...' : place.title }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div *ngIf=\\\"isLoading\\\" class=\\\"ion-text-center\\\">\\n    <ion-spinner color=\\\"primary\\\"></ion-spinner>\\n  </div>\\n  <ion-grid class=\\\"ion-no-padding\\\" *ngIf=\\\"!isLoading\\\">\\n    <ion-row>\\n      <ion-col sizeSm=\\\"6\\\" offsetSm=\\\"3\\\">\\n        <ion-img [src]=\\\"place.imgUrl\\\"></ion-img>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col sizeSm=\\\"6\\\" offsetSm=\\\"3\\\" class=\\\"ion-text-center ion-padding\\\">\\n        <p>{{ place.description }}</p>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col sizeSm=\\\"6\\\" offsetSm=\\\"3\\\" class=\\\"ion-text-center ion-padding\\\">\\n        <ion-img\\n          (click)=\\\"onShowFullMap()\\\"\\n          role=\\\"button\\\"\\n          class=\\\"location-img\\\"\\n          [src]=\\\"place.location.staticMapImageUrl\\\"\\n        ></ion-img>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col\\n        sizeSm=\\\"6\\\"\\n        offsetSm=\\\"3\\\"\\n        class=\\\"ion-padding\\\"\\n        class=\\\"ion-text-center\\\"\\n        ><p>{{ place.location.address }}</p></ion-col\\n      >\\n    </ion-row>\\n    <ion-row *ngIf=\\\"isBookable\\\">\\n      <ion-col sizeSm=\\\"6\\\" offsetSm=\\\"3\\\" class=\\\"ion-text-center\\\">\\n        <ion-button\\n          class=\\\"ion-margin\\\"\\n          color=\\\"primary\\\"\\n          (click)=\\\"onBookPlace()\\\"\\n          expand=\\\"block\\\"\\n          >Book</ion-button\\n        >\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}